<canvas id="myCanvas" style="width: 300px; height:300px;">

</canvas>
<a class="x">Download</a>
<script>
    let real = 99936;
    let pixel = 9;

    let h = real/pixel, x = 0, y = 0, i = 0;

    let hsl = [Math.floor(Math.random() * 360),  Math.floor(Math.random() * 100),  Math.floor(Math.random() * 100)]
    // let hsl = JSON.parse(prompt("HSL"));


    var c = document.getElementById("myCanvas");
    c.width = real;
    c.height = real;

    var ctx = c.getContext("2d");
    

    // -------- DARK
    // let color_p = [[2,2.4],  [1.7,2.1],[1.3,1.7],[1,1.3],  [0.7,1.1],[1,1.3],  [1.3,1.7],[1.7,2.1],[2,2.4],
    //                [1.7,2.1],[1.3,1.7],[1,1.3],  [0.7,1.1],[0.5,0.7],[0.7,1.1],[1,1.3],  [1.3,1.7],[1.7,2.1],
    //                [1.3,1.7],[1,1.3],  [0.7,1.1],[0.5,0.7],[0.2,0.5],[0.5,0.7],[0.7,1.1],[1,1.3],  [1.3,1.7],
    //                [1,1.3],  [0.7,1.1],[0.5,0.7],[0.2,0.4],[0,0.3],  [0.2,0.4],[0.5,0.7],[0.7,1.1],[1,1.3],
    //                [0.7,1.1],[0.5,0.7],[0.2,0.5],[0,0.3],  [0,0],    [0,0.3],  [0.2,0.5],[0.5,0.7],[0.7,1.1],
    //                [1,1.3],  [0.7,1.1],[0.5,0.7],[0.2,0.4],[0,0.3],  [0.2,0.4],[0.5,0.7],[0.7,1.1],[1,1.3],
    //                [1.3,1.7],[1,1.3],  [0.7,1.1],[0.5,0.7],[0.2,0.5],[0.5,0.7],[0.7,1.1],[1,1.3],  [1.3,1.7],
    //                [1.7,2.1],[1.3,1.7],[1,1.3],  [0.7,1.1],[0.5,0.7],[0.7,1.1],[1,1.3],  [1.3,1.7],[1.7,2.1],
    //                [2,2.4],  [1.7,2.1],[1.3,1.7],[1,1.3],  [0.7,1.1],[1,1.3],  [1.3,1.7],[1.7,2.1],[2,2.4]];

    // ------- NORMAL
    // let color_p =  [[6.2,7.0],[4.8,6.4],[4.9,6.1],[3.8,5.0],[3.1,4.9],[4.2,4.6],[4.3,5.6],[5.0,6.5],[6.0,7.0],
    //                [4.8,6.4], [3.1,3.9],[2.6,3.3],[2.2,2.8],[1.8,2.4],[2.1,2.7],[2.7,3.5],[3.5,4.3],[5.0,6.6],
    //                [4.2,5.8], [2.6,3.2],[1.2,1.8],[0.9,1.5],[0.3,0.9],[0.8,1.3],[1.3,2.0],[2.6,3.7],[4.5,5.5],
    //                [4.5,5.3], [2.5,3.1],[0.6,1.5],[0.2,0.5],[0,0.3],  [0.2,0.5],[0.5,1.4],[2.4,3.0],[4.3,5.1],
    //                [3.4,4.7], [1.7,2.6],[0.2,0.8],[0,0.3],  [0,0],    [0,0.3],  [0.2,0.9],[1.8,2.4],[3.2,4.3],
    //                [4.6,5.5], [2.3,2.9],[0.6,1.2],[0.2,0.5],[0,0.3],  [0.2,0.5],[0.4,1.7],[2.3,2.8],[3.4,4.8],
    //                [4.9,5.9], [2.6,3.4],[1.3,1.9],[0.7,1.3],[0.3,0.8],[0.5,1.3],[1.2,1.7],[2.5,3.4],[4.5,5.4],
    //                [5.2,6.8], [2.9,3.8],[2.7,3.4],[2.2,2.9],[1.7,2.5],[2.1,2.8],[2.8,3.6],[3.2,2.9],[4.5,6.4],
    //                [5.8,7.0], [5.2,6.8],[3.7,5.5],[3.7,4.9],[3.7,5.1],[3.9,5.3],[4.2,5.6],[4.3,5.6],[6.0,7.0]];

    // ------ NORMAL 2.0
    let color_p =  [[5.4,6.1],[4.8,6.4],[4.9,6.1],[3.8,5.0],[3.5,5.9],[4.2,4.6],[4.3,5.6],[5.0,6.5],[5.0,6.3],
                   [4.8,6.4], [3.1,3.9],[2.6,3.3],[2.2,2.8],[1.8,2.4],[2.1,2.7],[2.7,3.5],[3.5,4.3],[5.0,6.6],
                   [4.2,5.8], [2.6,3.2],[1.2,1.8],[0.9,1.5],[0.3,0.9],[0.8,1.3],[1.3,2.0],[2.6,3.7],[4.5,5.5],
                   [4.5,5.3], [2.5,3.1],[0.6,1.5],[0.2,0.5],[0,0.3],  [0.2,0.5],[0.5,1.4],[2.4,3.0],[4.3,5.1],
                   [4.4,6.7], [2.1,3.0],[0.2,0.8],[0,0.3],  [0,0],    [0,0.3],  [0.2,0.9],[2.1,3.4],[4.2,5.9],
                   [4.6,5.5], [2.3,2.9],[0.6,1.2],[0.2,0.5],[0,0.3],  [0.2,0.5],[0.4,1.7],[2.3,2.8],[3.4,4.8],
                   [4.9,5.9], [2.6,3.4],[1.3,1.9],[0.7,1.3],[0.3,0.8],[0.5,1.3],[1.2,1.7],[2.5,3.4],[4.5,5.4],
                   [5.2,6.8], [2.9,3.8],[2.7,3.4],[2.2,2.9],[2.1,3.0],[2.1,2.8],[2.8,3.6],[3.2,2.9],[4.5,6.4],
                   [5.8,6.3], [5.2,6.8],[3.7,5.5],[3.7,4.9],[3.7,5.1],[3.9,5.3],[4.2,5.6],[4.3,5.6],[5.8,6.4]];

    let color = [];

    for (let i = 0; i < color_p.length; i++) {
        let hex = hslToHex(hsl[0], hsl[1], hsl[2]+(((100-hsl[2])/7)*genRand(color_p[i][0], color_p[i][1], 2)));
        // color_p[i][Math.floor(Math.random()*color_p[i].length)]
        color.push(hex);
    }
    console.log(color);
    // --------

    let ex = 0;
    for (let e = 0; e < 9; e++) {
        for (let i = 0; i < 9; i++) {
            ctx.fillStyle = (color[ex] === 0)?'red':color[ex];
            ctx.beginPath();
            ctx.rect(i*h, e*h, h, h);
            ctx.fill();

            ex++;
        }   
    }


    function genRand(min, max, decimalPlaces) {  
        var rand = Math.random()*(max-min) + min;
        var power = Math.pow(10, decimalPlaces);
        return Math.floor(rand*power) / power;
    }
    function hslToHex(h, s, l) {
        l = (l>101)?100:l;
        l /= 100;
        const a = s * Math.min(l, 1 - l) / 100;
        const f = n => {
            const k = (n + h / 30) % 12;
            const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
            return Math.round(255 * color).toString(16).padStart(2, '0');   // convert to Hex and prefix "0" if needed
        };
        return `#${f(0)}${f(8)}${f(4)}`;
    }



    //---------------------

    let hex = hslToHex(hsl[0], hsl[1], hsl[2]);
    let a = document.querySelector('.x');

    a.innerHTML = hex;
    a.download = hex.toUpperCase()+".png";
    // a.download = hex.toUpperCase()+"-D.png";
    a.href = c.toDataURL("image/png", 1.0).replace("image/png", "image/octet-stream")

    document.write('<img style="width:500px;" src="'+c.toDataURL("image/png", 1.0).replace("image/png", "image/octet-stream")+'"/>');

</script>